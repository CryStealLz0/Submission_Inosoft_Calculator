<!DOCTYPE html>
<html lang="en">
  <head>
    <!-- Required meta tags -->
    <meta charset="utf-8" />
    <meta name="viewport" content="width=device-width, initial-scale=1" />

    <!-- Bootstrap CSS -->
    <link
      href="https://cdn.jsdelivr.net/npm/bootstrap@5.0.2/dist/css/bootstrap.min.css"
      rel="stylesheet"
      integrity="sha384-EVSTQN3/azprG1Anm3QDgpJLIm9Nao0Yz1ztcQTwFspd3yD65VohhpuuCOmLASjC"
      crossorigin="anonymous"
    />

    <title>Calculator</title>

    <!-- <style>
      .btn {
        height: 50px;
        font-size: 1em;
      }
    </style> -->
  </head>
  <body>
    <main class="d-grid w-100" style="height: 100vh">
      <div
        class="mx-auto my-auto w-100 bg-dark bg-opacity-25 rounded p-2 d-grid"
        style="max-width: 275px"
      >
        <input
          type="text"
          name="display"
          id="inputDisplay"
          required
          disabled
          placeholder="Calculator"
          class="form-control form-control-lg fs-3 text-end bg-white border-0 rounded shadow-none"
          value="0"
        />
        <div class="row row-cols-4 g-2 mt-1">
          <div class="col">
            <button type="button" class="btn w-100 bg-white" type="all-clear">
              AC
            </button>
          </div>
          <div class="col">
            <button type="button" class="btn w-100 bg-white" type="">
              +/-
            </button>
          </div>
          <div class="col">
            <button type="button" class="btn w-100 bg-white" type="">%</button>
          </div>
          <div class="col">
            <button type="button" class="btn w-100 bg-white" type="/">/</button>
          </div>
          <div class="col">
            <button type="button" class="btn w-100 bg-white" type="7">7</button>
          </div>
          <div class="col">
            <button type="button" class="btn w-100 bg-white" type="8">8</button>
          </div>
          <div class="col">
            <button type="button" class="btn w-100 bg-white" type="9">9</button>
          </div>
          <div class="col">
            <button type="button" class="btn w-100 bg-white" type="*">x</button>
          </div>
          <div class="col">
            <button type="button" class="btn w-100 bg-white" type="4">4</button>
          </div>
          <div class="col">
            <button type="button" class="btn w-100 bg-white" type="5">5</button>
          </div>
          <div class="col">
            <button type="button" class="btn w-100 bg-white" type="6">6</button>
          </div>
          <div class="col">
            <button type="button" class="btn w-100 bg-white" type="-">-</button>
          </div>
          <div class="col">
            <button type="button" class="btn w-100 bg-white" type="1">1</button>
          </div>
          <div class="col">
            <button type="button" class="btn w-100 bg-white" type="2">2</button>
          </div>
          <div class="col">
            <button type="button" class="btn w-100 bg-white" type="3">3</button>
          </div>
          <div class="col">
            <button type="button" class="btn w-100 bg-white" type="+">+</button>
          </div>
          <div class="col">
            <button type="button" class="btn w-100 bg-white" type="all-clear">
              c
            </button>
          </div>
          <div class="col">
            <button type="button" class="btn w-100 bg-white" type="0">0</button>
          </div>
          <div class="col">
            <button type="button" class="btn w-100 bg-white" type=".">.</button>
          </div>
          <div class="col">
            <button type="button" class="btn w-100 bg-white" type="=">=</button>
          </div>
        </div>
      </div>
    </main>

    <script>
      const calculator = {
        displayValue: '0',
        firstOperand: null,
        waitingForSecondOperand: false,
        operator: null,
      };

      function inputDigit(digit) {
        const { displayValue, waitingForSecondOperand } = calculator;

        if (waitingForSecondOperand === true) {
          calculator.displayValue = digit;
          calculator.waitingForSecondOperand = false;
        } else {
          calculator.displayValue =
            displayValue === '0' ? digit : displayValue + digit;
        }
      }

      function inputDecimal(dot) {
        // If the `displayValue` does not contain a decimal point
        if (!calculator.displayValue.includes(dot)) {
          // Append the decimal point
          calculator.displayValue += dot;
        }
      }

      function handleOperator(nextOperator) {
        const { firstOperand, displayValue, operator } = calculator;
        const inputValue = parseFloat(displayValue);

        if (operator && calculator.waitingForSecondOperand) {
          calculator.operator = nextOperator;
          return;
        }

        if (firstOperand == null) {
          calculator.firstOperand = inputValue;
        } else if (operator) {
          const currentValue = firstOperand || 0;
          const result = performCalculation[operator](currentValue, inputValue);

          calculator.displayValue = String(result);
          calculator.firstOperand = result;
        }

        calculator.waitingForSecondOperand = true;
        calculator.operator = nextOperator;
      }

      const performCalculation = {
        '/': (firstOperand, secondOperand) => firstOperand / secondOperand,

        '*': (firstOperand, secondOperand) => firstOperand * secondOperand,

        '+': (firstOperand, secondOperand) => firstOperand + secondOperand,

        '-': (firstOperand, secondOperand) => firstOperand - secondOperand,

        '=': (firstOperand, secondOperand) => secondOperand,
      };

      function resetCalculator() {
        calculator.displayValue = '0';
        calculator.firstOperand = null;
        calculator.waitingForSecondOperand = false;
        calculator.operator = null;
      }

      function updateDisplay() {
        const display = document.querySelector('.calculator-screen');
        display.value = calculator.displayValue;
      }

      updateDisplay();

      const keys = document.querySelector('.calculator-keys');
      keys.addEventListener('click', (event) => {
        const { target } = event;
        if (!target.matches('button')) {
          return;
        }

        if (target.classList.contains('operator')) {
          handleOperator(target.value);
          updateDisplay();
          return;
        }

        if (target.classList.contains('decimal')) {
          inputDecimal(target.value);
          updateDisplay();
          return;
        }

        if (target.classList.contains('all-clear')) {
          resetCalculator();
          updateDisplay();
          return;
        }

        inputDigit(target.value);
        updateDisplay();
      });
    </script>

    <script
      src="https://code.jquery.com/jquery-3.5.1.slim.min.js"
      integrity="sha384-DfXdz2htPH0lsSSs5nCTpuj/zy4C+OGpamoFVy38MVBnE+IbbVYUew+OrCXaRkfj"
      crossorigin="anonymous"
    ></script>
    <script
      src="https://cdn.jsdelivr.net/npm/popper.js@1.16.1/dist/umd/popper.min.js"
      integrity="sha384-9/reFTGAW83EW2RDu2S0VKaIzap3H66lZH81PoYlFhbGU+6BZp6G7niu735Sk7lN"
      crossorigin="anonymous"
    ></script>
    <script
      src="https://stackpath.bootstrapcdn.com/bootstrap/4.5.1/js/bootstrap.min.js"
      integrity="sha384-XEerZL0cuoUbHE4nZReLT7nx9gQrQreJekYhJD9WNWhH8nEW+0c5qq7aIo2Wl30J"
      crossorigin="anonymous"
    ></script>
    <script src="script.js"></script>
  </body>
</html>
